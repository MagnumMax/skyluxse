# Fleet Calendar v2

## Цель
Создать экспериментальную страницу `/fleet-calendar/v2`, которая повторяет текущие процессы работы с данными календаря, но предлагает обновлённый UI: колонка `Vehicles` полностью непрозрачна и визуально согласована с референсом Fleetio (https://marketing-cdn.fleetio.com/images/blog/fleetio-vehicle-assignments-scheduler.png).

## Область работ
- Только клиентский интерфейс: таблица, взаимодействия, стили.
- Контракты API и источники данных не меняются.

## Сценарии пользователя
1. Просмотр доступности парка на диапазонах 3/7/14/30/90 дней с подсветкой текущей даты.
2. Переключение группировки между body style и manufacturer без мерцаний.
3. Навигация по датам через кнопки previous/next/today.
4. Клик по событию открывает обработчик деталей (модалка, боковая панель и т. п.).

## UI / UX требования
- **Левая колонка**: sticky, плотный фон `hsl(var(--card))`, единый для хедера/групп/строк; отображает название авто, номер, бейдж статуса в стиле Fleetio.
- **Хедер**: содержит элементы управления (диапазоны, навигация, поиск, группировка) и легенду цветов статусов сверху — решение из пункта 2 открытых вопросов.
- **Таймлайн**: горизонтальный скролл действует только на правую сетку, левая колонка фиксирована. События показывают заголовок, информацию о клиенте/задаче и при необходимости иконку статуса; колонка сегодняшнего дня выделена вертикальным акцентом.
- **Токены**: задать цвета фона, бордеры и тени через CSS custom properties, чтобы быстро адаптировать макет.
- **Адаптивность**: элементы управления аккуратно схлопываются на узких экранах; sticky-offset учитывает высоту dashboard header в обеих темах.

## Технические требования
- Next.js App Router; добавить отдельный компонент (например, `FleetCalendarBoardV2`) с возможностью переиспользовать `useFleetCalendarController`.
- Стили локализованы (CSS Module или выделенный CSS), используют глобальные переменные темы и сохраняют плотный фон слева.
- Новый компонент подключается только на `/fleet-calendar/v2`, чтобы не затрагивать текущую страницу.
- Производительность: `useMemo` для видимых дат, группировок, фильтрованных событий; целимся в плавную работу при 200+ автомобилях.
- Доступность: контраст ≥4.5:1, `:focus-visible` у всех контролов, sticky-элементы не мешают клавиатурной навигации.

## Тестирование и проверка
- Перед PR запускать `pnpm lint` и `pnpm test`.
- Ручные смоук-тесты в светлой/тёмной теме для всех диапазонов.
- Юнит-тесты логики контроллера (смещение дат, фильтрация событий).

## Артефакты и ссылки
- Сохранить скрин Fleetio в `docs/ui/fleet-calendar/` как UI-референс.
- Запросить финальные макеты + палитру и spacing-токены (формулировки в Canadian English, если нужны подписи).
- Описать дополнительные бейджи/иконки статусов, если появятся отличия от текущей реализации.

## Принятые решения
1. Левая колонка использует плотный цвет карточек дашборда (`hsl(var(--card))`).
2. Легенда располагается в зоне хедера.
3. Переключатели диапазона и группировки остаются в шапке календаря.

Дальнейшие шаги: прикрепить дизайн-активы, затем приступить к реализации `/fleet-calendar/v2` по этому ТЗ.
