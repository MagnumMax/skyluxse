# Product Requirements Document (PRD)
## SkyLuxse - Платформа управления автопарком люксовых автомобилей

---

## Содержание
1. [Введение](#введение)
2. [Цели проекта](#цели-проекта)
3. [Функциональные требования](#функциональные-требования)
4. [Нефункциональные требования](#нефункциональные-требования)
5. [Пользовательские истории и сценарии использования](#пользовательские-истории-и-сценарии-использования)
6. [Дизайн интерфейса и пользовательский опыт](#дизайн-интерфейса-и-пользовательский-опыт)
7. [Техническая архитектура и стек технологий](#техническая-архитектура-и-стек-технологий)
8. [Риски и зависимости](#риски-и-зависимости)
9. [План реализации](#план-реализации)
10. [Критерии приемки](#критерии-приемки)

---

## Введение

### Описание проекта
SkyLuxse — это специализированное веб-приложение для управления автопарком люксовых автомобилей в сфере аренды. Система предназначена для оптимизации бизнес-процессов компании по аренде премиальных автомобилей, включая управление заказами, автопарком, клиентами и финансовыми операциями.

Приложение предоставляет комплексное решение для пяти ключевых ролей пользователей:
- **Sale Manager** — управление продажами и клиентскими отношениями
- **Operations Manager** — управление операционными процессами и эффективностью
- **CEO/Руководство** — аналитика и стратегическое управление
- **Водители** — выполнение задач по доставке и обслуживанию
- **Клиенты** — управление своими бронированиями и документами

### Цели проекта
Целью проекта является создание современной, эффективной и масштабируемой платформы, которая позволит:

1. **Оптимизировать операционные процессы** — автоматизировать рутинные операции по управлению заказами и автопарком
2. **Повысить качество обслуживания клиентов** — обеспечить прозрачность процессов и оперативность реакции
3. **Улучшить финансовую эффективность** — оптимизировать загрузку автопарка и минимизировать простои
4. **Предоставить аналитические инструменты** — дать руководству данные для принятия обоснованных решений
5. **Обеспечить мобильность для водителей** — создать адаптивный интерфейс для выполнения задач в полевых условиях
6. **Создать удобный клиентский портал** — предоставить клиентам доступ к информации об арендах и документам

### Область применения
- Управление автопарком люксовых автомобилей
- Обработка заказов и бронирований
- Координация работы водителей
- Финансовый учет и отчетность
- Клиентское обслуживание и CRM
- Клиентский портал для управления арендами

---

## Цели проекта

### Основные цели
1. **Автоматизация бизнес-процессов** — сократить время обработки заказов на 60%
2. **Повышение утилизации автопарка** — увеличить коэффициент загрузки с 70% до 90%
3. **Улучшение клиентского опыта** — сократить время отклика на запросы до 15 минут
4. **Финансовая прозрачность** — обеспечить实时 отслеживание доходов и расходов
5. **Масштабируемость** — поддерживать рост автопарка до 200+ единиц

### Целевые показатели
- **Время обработки заказа**: < 5 минут
- **Утилизация автопарка**: > 85%
- **Клиентская удовлетворенность**: > 4.8/5.0
- **Время отклика на запросы**: < 15 минут
- **Точность финансовой отчетности**: 100%

---

## Функциональные требования

### 1. Система аутентификации и авторизации
**FR-001: Многоуровневая аутентификация**
- Поддержка пяти ролей: Sale Manager, Operations Manager, CEO, водитель, клиент
- Защищенное хранение учетных данных
- Возможность смены ролей для тестирования и обучения
- Автоматический выход при бездействии
- OTP верификация для клиентов по телефону/email

**FR-002: Управление доступом**
- Ролевая модель доступа к функционалу
- Разграничение прав на просмотр/редактирование данных
- Аудит действий пользователей

### 2. Управление заказами (Kanban система)
**FR-003: Канбан доска заказов**
- Визуальное представление заказов в статусе
- Drag & Drop для изменения статуса заказа
- Цветовая кодировка по приоритету и типу
- Фильтрация и поиск заказов

**FR-004: Создание и редактирование заказов**
- Форма создания нового заказа с валидацией
- Автоматическое назначение водителя
- Расчет стоимости аренды
- Управление историей изменений

**FR-005: Детальная информация о заказе**
- Просмотр полной информации о заказе
- Управление финансовыми операциями
- Отслеживание статуса оплаты

### 3. Управление автопарком
**FR-006: Календарь загрузки**
- Визуальное представление занятости автопарка
- Фильтрация по классу автомобиля и статусу
- Интерактивные элементы для просмотра деталей
- Планирование технического обслуживания
- Тип букинга указывается при создании записи в календаре (Rental, Maintenance, Incident, Repair и др.) для учёта внеплановых событий

**FR-007: Каталог автомобилей**
- Управление базой данных автомобилей
- Фото и документы автомобилей
- История инспекций и обслуживания
- Статус доступности

**FR-008: Классификация автомобилей**
- Категории: Люкс, SUV, Спорткары
- Управление характеристиками автомобилей
- Ценообразование по категориям и времени аренды
- Гибкие тарифы: сутки, 3 дня, неделя, месяц
- Автоматический расчет скидок за длительность аренды
- Сезонные коэффициенты ценообразования

### 4. Управление задачами
**FR-009: Система типов задач**
- Настраиваемые типы задач с индивидуальными наборами полей
- Стандартные типы: подготовка авто, доставка, забор, 
- Специфичные типы: инспекция, ТО итд
- Кастомные поля для каждого типа задач
- Валидация данных в зависимости от типа задачи

**FR-010: Создание задач**
- Ручное создание задач (только стандартные типы)
- Назначение ответственного исполнителя
- Автоматическое создание задач по бизнес-процессам
- Генерация задач на основе статусов заказов

**FR-011: Управление задачами**
- Отслеживание прогресса выполнения задач
- Уведомления о приближающихся дедлайнах
- Система приоритизации задач
- История изменений и комментарии

**FR-012: Мобильная версия для водителей**
- Адаптивный интерфейс для мобильных устройств
- Задачи на день с приоритизацией
- Фото-отчетность выполнения задач
- GPS трекинг
- **PWA (Progressive Web App)** для надежной работы и удобства использования
- Координаты точек назначения в задачах доставки/забора

**FR-013: Автоматизация бизнес-процессов**
- Автоматическое создание задач по статусам заказов
- Генерация уведомлений по событиям
- Автоматическое назначение исполнителей
- Система триггеров и условий
- Автоматическая проверка штрафов и нарушений
- Генерация дополнительных платежей
- **Автоматическое планирование задач водителей** на основе бизнес-процессов и приоритетов
- **Автоматическое распределение заказов по статусам** в канбан-доске по выполнению бизнес-правил
- Входные данные валидируются автоматически; при обнаружении ошибок автогенерация задач блокируется без участия оператора

**FR-014: Действия водителя в задачах**
- Заполнение показаний: километраж, уровень бензина
- Внесение принятых сумм денег
- Добавление предустановленных услуг с указанием суммы
- Фото-отчетность выполнения задач
- Валидация введенных данных перед завершением задачи
- Проверка штрафов и платных дорог выполняется системой по нажатию кнопки водителя с автоподстановкой данных, при необходимости водитель может заполнить поля вручную
- Обязательное прикрепление фото подтверждения оплаты (наличные, чек, скрин экрана)

### 5. Клиентская база (CRM)
**FR-014: Управление клиентами**
- База данных клиентов с контактной информацией
- История заказов и предпочтения
- Сегментация по статусу (VIP, Gold, Silver)
- Управление документами клиентов

**FR-015: Финансовая информация**
- Отслеживание платежей и задолженностей
- Генерация отчетов по клиентам
- Интеграция с платежными системами

### 6. Интеграция с внешними системами
**FR-016: Kommo CRM интеграция**
- Получение webhook событий от Kommo
- Обработка события изменения статуса лида на Pre-confirm
- Автоматическое создание клиента из данных Kommo
- Автоматическое создание заказа из данных лида
- Извлечение документов клиента файлами из Kommo
- Image recognition для извлечения данных документов
- Запись извлеченных данных документов в базу SkyLuxse
- Синхронизация статусов между системами

**FR-017: Zoho интеграция**
- Автоматическое создание Sale Order в Zoho при подтверждении заказа
- Синхронизация данных заказов между SkyLuxse и Zoho
- Обновление статусов заказов в Zoho
- Получение данных о платежах из Zoho

**FR-018: Обработка документов клиентов**
- Image recognition для извлечения данных документов
- Поддержка паспортов, водительских удостоверений
- Валидация извлеченных данных документов
- Сопоставление данных документов с данными из Kommo
- Корректность распознанных данных подтверждается автоматически, ручная проверка не требуется

**FR-019: API для внешних интеграций**
- RESTful API для получения данных
- Webhook эндпоинты для внешних систем
- Аутентификация API запросов
- Логирование всех интеграционных событий

### 7. Единая панель мониторинга реального времени (Dashboard для всех ролей руководства)
**FR-020: Ключевые метрики для Sale Manager, Operations Manager и CEO**
- Утилизация автопарка в реальном времени
- Количество активных заказов
- Доходность по автомобилям
- Статистика по новым клиентам
- Эффективность операционных процессов
- KPI выполнения задач водителями

**FR-021: Графики и диаграммы**
- Графики заказов по времени
- Распределение по классам автомобилей
- Финансовые показатели
- Интерактивные фильтры дат
- Анализ эффективности водителей
- Мониторинг операционных показателей

**FR-022: Модуль предиктивной аналитики**
- Прогнозирование спроса на различные классы автомобилей на базе машинного обучения
- Оптимальные цены для максимизации прибыли
- Периоды пиковой загрузки
- Система алертов на базе аномалий - автоматическое выявление отклонений от нормы
- Прогнозирование простоев и узких мест в операционных процессах

### 8. Отчетность
**FR-023: Финансовые отчеты**
- Ежемесячные финансовые сводки
- Топ автомобилей по доходности
- Анализ расходов и прибыли
- Экспорт в различные форматы

**FR-024: Операционные отчеты**
- Отчеты по загрузке автопарка
- Анализ эффективности водителей
- Статистика по клиентам

### 9. Финансовые операции
**FR-025: Синхронизация платежей с Zoho**
- Получение данных о платежах из Zoho
- Синхронизация статусов оплат между системами
- Обработка вебхуков об оплатах от Zoho
- Отображение платежной информации в SkyLuxse

**FR-026: Финансовый учет**
- Автоматический расчет стоимости аренды по времени
- Учет дополнительных услуг и сезонных коэффициентов
- Управление депозитами и залогами
- Применение скидок за длительность аренды
- Автоматическая проверка и расчет штрафов
- Управление дополнительными платежами
- Синхронизация финансовых данных с Zoho

### 11. Управление операционной эффективностью (Operations Manager)
**FR-027: Управление штрафами и дополнительными платежами**
- Автоматическая проверка штрафов при возврате автомобилей
- Создание дополнительных платежей за штрафы и нарушения
- Обновление инвойсов с учетом штрафов и доп. услуг
- Уведомления клиентов о штрафах и дополнительных платежах
- Анализ причин штрафов для предотвращения повторений

**FR-028: Анализ эффективности водителей**
- Отчеты по эффективности выполнения задач водителями
- Анализ времени выполнения типовых операций
- Статистика по ошибкам и нарушениям процесса
- Рекомендации по оптимизации загрузки водителей
- KPI мониторинг для каждого водителя

**FR-029: Мониторинг операционных процессов**
- Отслеживание статуса подготовки автомобилей в реальном времени
- Мониторинг текущего местоположения водителей (при согласии)
- Контроль доступности автопарка по категориям онлайн
- Анализ загруженности водителей и автомобилей
- Предиктивная аналитика простоев и узких мест

### 10. Клиентский портал
**FR-027: Регистрация и профиль клиента**
- Автоматическое приглашение клиентов после создания первого заказа
- Отправка email с информацией о доступе к порталу
- Вход по номеру телефона или email с OTP верификацией
- Доступ к порталу сразу после создания записи в базе
- Управление профилем и контактными данными
- Синхронизация данных с Kommo при изменении статуса

**FR-028: Управление арендами**
- Просмотр активных и прошлых аренд
- Детали аренды (автомобиль, даты, стоимость, статус)
- История платежей и оплат
- Детали предстоящих аренд

**FR-029: Документы и контракты**
- Импорт документов клиентов из Kommo с локальным хранением
- Локальное хранение документов автомобилей (страховки, мулькия)
- Динамическое извлечение финансовых документов через API Zoho
- Просмотр и скачивание контрактов, инвойсов, SOA в реальном времени
- Доступ к payment receipts из Zoho
- Локальное хранение фото инспекций в SkyLuxse
- Сверки с клиентом из Zoho

**FR-030: Система платежей**
- Оплата существующих аренд
- Доплаты за дополнительные услуги и штрафы
- Синхронизация платежей с Zoho
- История транзакций из Zoho

**FR-031: Единая система уведомлений**
- Централизованная система уведомлений для всех ролей пользователей
- Email и SMS уведомления о статусе аренды
- Напоминания о предстоящих арендах
- Обратная связь и поддержка
- Push уведомления в браузере и мобильном приложении
- Настраиваемые правила уведомлений для каждой роли
- Группировка уведомлений по приоритету и типу событий

**FR-032: База знаний и FAQ**
- Раздел FAQ по аренде автомобилей
- Инструкции по использованию автомобилей
- Политика компании и правила аренды
- Поиск по базе знаний

**FR-033: Личный кабинет**
- Дашборд с обзором активных аренд
- Статистика расходов на аренду
- История аренд и предпочтения
- Настройки уведомлений

**FR-034: Real-time трекинг аренды**
- Отслеживание статуса в режиме реального времени:
  - Подготовка автомобиля
  - Доставка клиенту
  - Текущее местоположение (при согласии клиента)
  - Процесс возврата

**FR-035: Push уведомления**
- Уведомления о каждом изменении статуса аренды

**FR-036: Интерактивная карта процесса**
- Визуализация всех этапов аренды

**FR-037: Прозрачность ценообразования**
- Детализация всех составляющих стоимости

---


## Нефункциональные требования

### Масштабируемость
**NFR-001: Горизонтальное масштабирование**
- Микросервисная архитектура
- Независимое масштабирование компонентов
- Автоматическое распределение нагрузки

### Безопасность
**NFR-002: Аутентификация и авторизация**
- Шифрование паролей (bcrypt/scrypt)
- JWT токены с коротким временем жизни
- Защита от CSRF атак
- Rate limiting для API

### Надежность
**NFR-003: Доступность**
- Uptime 99.5% (не более 43 часов простоя в год)
- Автоматическое восстановление после сбоев
- Резервные серверы и базы данных

### Удобство использования
**NFR-004: Интерфейс**
- Responsive design для всех устройств
- Поддержка мобильных браузеров
- Интуитивная навигация
- Локализация на русский язык

**NFR-005: Доступность**
- Соответствие WCAG 2.1 AA
- Поддержка клавиатурной навигации
- Экранные читалки

---

## Пользовательские истории и сценарии использования

### User Story 1: Синхронизация заказа из Kommo CRM
**Как** система SkyLuxse
**Я хочу** автоматически синхронизировать заказы из Kommo CRM
**Чтобы** обеспечить единый источник данных и избежать дублирования

**Сценарий:**
1. Клиент обращается в компанию по телефону или через сайт
2. Sale Manager работает с клиентом в Kommo CRM (общение, создание лида)
3. Sale Manager подтверждает букинг в Kommo (авто, стоимость, даты, место доставки/забора)
4. При переводе лида в статус Pre-confirm Kommo отправляет webhook
5. Система получает webhook и извлекает данные по клиенту и букингу из Kommo
6. Система автоматически создает клиента в базе SkyLuxse
7. Автоматически извлекает документы клиента файлами из Kommo
8. Через image recognition извлекает данные документов (паспорт, права)
9. Создает заказ с данными из Kommo
10. Генерирует задачи для водителя (подготовка, доставка)
11. Клиент получает уведомление о доступе к порталу

### User Story 2: Водитель выполняет задачу доставки
**Как** водитель компании
**Я хочу** получать четкие инструкции по задачам и фиксировать все действия
**Чтобы** эффективно выполнять свою работу и вести учет

**Сценарий:**
1. Водитель открывает мобильную версию веб-приложения
2. Видит список задач на день отсортировано по времени
3. Выбирает задачу доставки автомобиля
4. Получает информацию о клиенте, адресе и деталях аренды
5. Проверяет документы клиента и делает фото для подтверждения
6. Прикрепляет документы клинта в задачу
7. Заполняет показания: текущий километраж авто, уровень бензина в баке
8. Может добавить предустановленную услугу из списка и указать сумму
9. Вносит сумму денег, которую принял от клиента
10. Прикрепляет фото подтверждения оплаты (наличные, чек, скрин) и подтверждает получение оплаты (данные синхронизируются с Zoho)
11. Система заполненяет Sales order в Zoho и автоматически отправляет клиенту на подписание
12. Завершает задачу в системе с указанием всех выполненных действий

### User Story 3: Operations Manager анализирует операционную эффективность
**Как** Operations Manager компании
**Я хочу** видеть операционные метрики и эффективность процессов
**Чтобы** оптимизировать операционные процессы и повысить эффективность

**Сценарий:**
1. Operations Manager открывает единый дашборд
2. Просматривает текущую утилизацию автопарка в реальном времени
3. Анализирует эффективность водителей и выполнения задач
4. Мониторит статус подготовки автомобилей онлайн
5. Отслеживает текущее местоположение водителей (при согласии)
6. Изучает отчеты по операционным KPI
7. Принимает решения по оптимизации процессов

### User Story 4: Водитель обрабатывает возврат автомобиля с проверкой штрафов
**Как** водитель компании
**Я хочу** эффективно обрабатывать возврат автомобилей с проверкой штрафов и дополнительных услуг
**Чтобы** минимизировать простои и избежать финансовых потерь

**Сценарий:**
1. Клиент возвращает автомобиль
2. Водитель осматривает автомобиль и делает фото состояния
3. Водитель заполняет показания: текущий километраж авто, уровень бензина в баке
4. Водитель запускает автоматическую проверку штрафов и платных дорог, при необходимости корректирует результаты вручную
5. Водитель может добавить предустановленную услугу из списка и указать сумму
6. Водитель вносит сумму денег, которую принял от клиента
7. Прикрепляет фото подтверждения оплаты (наличные, чек, скрин)
8. Подтверждает получение оплаты (данные синхронизируются с Zoho)
9. Система обновляет инвойс в Zoho с дополнительными платежами
10. Завершает задачу в системе с указанием всех выполненных действий
11. Система обновляет статус автомобиля как "доступен"
12. Система автоматически создает задачу на подготовку для следующего заказа

### User Story 5: Клиент управляет арендой онлайн
**Как** клиент компании
**Я хочу** просматривать информацию о своих арендах онлайн
**Чтобы** всегда быть в курсе деталей аренды и иметь доступ к документам

**Сценарий:**
1. В Kommo создается лид и переводится в соответствующий статус
2. Система автоматически создает запись о клиенте в базе
3. Импортирует документы клиента из Kommo и сохраняет локально
4. Клиент получает email с приглашением на портал и информацией о возможностях
5. Клиент входит на портал по номеру телефона или email с OTP верификацией
6. Доступ к порталу активируется сразу после создания записи в базе
7. Просматривает активные аренды в дашборде
8. Получает уведомления о статусе аренды
9. Просматривает локально сохраненные документы клиента (паспорт, права)
10. Динамически просматривает и скачивает финансовые документы из Zoho через API
11. Видит реальные сверки с клиентом из Zoho через API
12. Оплачивает дополнительные услуги
13. Получает напоминания о предстоящих арендах

---


## Дизайн интерфейса и пользовательский опыт

### Дизайн-система (Linear.app стиль)
**DS-001: Цветовая палитра**
- Основной цвет: Темно-синий (#0f172a)
- Акцентный цвет: Зеленый для успеха (#22c55e)
- Предупреждающий: Желтый для внимания (#eab308)
- Опасный: Красный для ошибок (#ef4444)
- Фон: Белый (#ffffff) с серыми оттенками
- Границы: Светло-серый (#e2e8f0)
- Текст: Темно-серый (#334155)

**DS-002: Типографика**
- Основной шрифт: Inter (чистый, читаемый)
- Заголовки: 600-700 вес, четкие иерархии
- Основной текст: 400-500 вес для оптимальной читаемости
- Размеры: 12px - 36px с правильной пропорцией
- Межбуквенное расстояние: 0.025em для лучшей читаемости

**DS-003: Компоновка и пространство**
- Щедрое использование белого пространства (24px-48px отступы)
- Максимальная ширина контента: 1200px
- Консистентная сетка: 8px базовый размер
- Тонкие тени: 0 1px 3px rgba(0,0,0,0.1)
- Скругления: 8px-12px для современных ощущений

### UX принципы (Linear.app стиль)
**UX-001: Минимализм и чистота**
- Чистый интерфейс без визуального шума
- Щедрое использование белого пространства
- Фокус на контенте, а не на декорациях
- Тонкие тени и границы для глубины

**UX-002: Типографика и читаемость**
- Кристалльно чистая типографика с правильной иерархией
- Высокий контраст для оптимальной читаемости
- Консистентные размеры и веса шрифтов
- Оптимальное межбуквенное расстояние

**UX-003: Интуитивная навигация**
- Логичная группировка функций по назначению
- Предотвращение ошибок через умную валидацию
- Быстрый доступ к часто используемым функциям
- Плавные переходы между состояниями

**UX-004: Mobile-first подход**
- Оптимизация для мобильных устройств в первую очередь
- Адаптивные интерфейсы для всех размеров экранов
- Touch-friendly элементы управления
- Gesture-based взаимодействия

---

## Техническая архитектура и стек технологий

### Архитектурные принципы
**ARCH-001: Современная веб-архитектура**
- **App Router** с Server Components
- **Serverless functions** для критических операций
- **Route Handlers** для API эндпоинтов
- **Supabase** для аутентификации и базы данных

**ARCH-002: Mobile-first и адаптивность**
- **Mobile-first** подход к дизайну
- **Responsive** интерфейсы для всех устройств
- **PWA возможности** для мобильного опыта
- **Touch-оптимизированные** взаимодействия

### Технологический стек

#### Frontend
**TF-001: Базовые технологии**
- **Next.js 15** — React фреймворк с App Router
- **React 19** — компонентная архитектура
- **Tailwind CSS v4** — утилитарный CSS фреймворк
- **shadcn/ui** — компонентная библиотека

**TF-002: UI и взаимодействие**
- **Radix UI** — примитивы для доступных компонентов
- **clsx/tailwind-merge** — условные классы
- **Framer Motion** — анимации
- **tailwindcss-animate** — CSS анимации
- **Lucide Icons** — иконки интерфейса

**TF-003: Данные и состояние**
- **Recharts** — визуализация данных
- **Sonner** — уведомления и тосты

#### Backend
**TB-001: Серверная платформа**
- **Custom backend ([B])** — кастомный бэкенд
- **Supabase** — BaaS платформа
- **Serverless functions** — бессерверные функции

**TB-002: База данных**
- **PostgreSQL via Supabase** — основная БД
- **Supabase Storage** — файловое хранилище

**TB-003: Аутентификация**
- **Supabase Auth** — аутентификация с JWT

#### Интеграции
**TI-001: CRM системы ([I])**
- **Kommo интеграция** — синхронизация лидов и заказов
- **Webhook обработка** — события изменения статусов
- **Автоматическое создание клиентов** из CRM данных

**TI-002: Финансовые интеграции**
- **Генерация платежных документов** в Zoho

**TI-003: AI сервисы ([AI])**
- **Image Recognition** — извлечение данных документов
- **Predictive Analytics** — прогнозирование спроса
- **NLP** — обработка текстовых данных
- **Recommendation Engine** — персональные предложения

**TI-004: Геолокация**
- **Геолокация** — определение местоположения водителей

**TI-005: Коммуникация**
- **Email/SMS сервисы** — уведомления клиентам и водителям
- **Push уведомления** — для мобильных приложений

**TI-006: Мониторинг и DevOps**
- **Sentry** — отслеживание ошибок
- **GitHub Actions** — CI/CD pipeline
- **Vercel** — deployment платформа

### Структура проекта
```
skyluxse/
├── src/
│   ├── controllers/  # Контроллеры бизнес-логики
│   ├── models/       # Модели данных
│   ├── routes/       # Маршруты API
│   ├── views/        # Шаблоны страниц
│   ├── public/       # Статические файлы
│   └── middleware/   # Промежуточное ПО
├── tests/            # Тесты приложения
├── config/           # Конфигурационные файлы
├── scripts/          # Скрипты развертывания
├── docs/             # Документация
└── infrastructure/
    ├── docker/       # Контейнеризация
    ├── nginx/        # Веб-сервер и прокси
    └── deployment/   # Скрипты развертывания
```

---

## Риски и зависимости

### Зависимости
**D-001: Внешние API**
- Kommo CRM API доступность и webhook стабильность
- Zoho API доступность и лимиты запросов
- Image Recognition сервис (Google Vision API, Tesseract OCR)
- Google Maps API квоты
- Email/SMS сервисы
- Базы данных штрафов (RTA, Dubai Police API)

**D-002: Команда разработки**
- Full-stack разработчики (3-4 человека)
- UI/UX дизайнер (1 человек)
- DevOps инженер (1 человек)
- QA инженер (1 человек)

**D-003: Инфраструктура**
- Облачный провайдер (AWS/GCP)
- CDN для медиафайлов
- SSL сертификаты

---

## План реализации

### Этап 1: Подготовка и планирование (2 недели)
**W1-W2:**
- Сбор и анализ требований ✅
- Создание технического задания
- Настройка окружения разработки
- Проектирование архитектуры

### Этап 2: Базовая инфраструктура (3 недели)
**W3-W5:**
- Настройка базы данных и схемы
- Сервер аутентификации и авторизации
- Базовая структура веб-приложения
- Система логирования и мониторинга

### Этап 3: Core функциональность (4 недели)
**W6-W9:**
- Управление автопарком
- Система заказов
- Базовая канбан доска
- Календарь загрузки

### Этап 4: Расширенные возможности (5 недель)
**W10-W14:**
- Продвинутые аналитики
- Финансовые операции
- Адаптивная мобильная версия для водителей
- Клиентский портал (базовая версия)
- Интеграция с Kommo CRM (базовая)
- Интеграция с Zoho (полная, включая платежи)
- Система штрафов и дополнительных платежей

### Этап 5: Клиентский портал (2 недели)
**W14-W15:**
- Личный кабинет клиентов
- Управление документами клиентов
- FAQ и база знаний
- Система уведомлений

### Этап 6: Тестирование и запуск (3 недели)
**W16-W18:**
- Интеграционное тестирование
- UAT тестирование
- Тестирование клиентского портала
- Тестирование интеграций с Kommo и Zoho
- Тестирование системы штрафов
- Подготовка production окружения
- Го лайв

### Этап 7: Оптимизация и поддержка (постоянно)
**W19+:**
- Мониторинг производительности
- Сбор обратной связи
- Итеративные улучшения
- Масштабирование

### Ресурсы по этапам
| Этап | Full-stack | Design | DevOps | QA |
|------|------------|--------|--------|----|
| 1 | 2 | 1 | 1 | - |
| 2 | 3 | - | 1 | - |
| 3 | 4 | - | - | 1 |
| 4 | 4 | 1 | - | 2 |
| 5 | 2 | 1 | - | 1 |
| 6 | 2 | - | 1 | 3 |

---

## Критерии приемки

### Функциональные критерии
**AC-001: Аутентификация**
- [ ] Успешная авторизация всех ролей
- [ ] Корректное разграничение доступа
- [ ] Безопасное хранение учетных данных
- [ ] OTP верификация для клиентов по телефону/email

**AC-002: Управление заказами**
- [ ] Создание заказа за < 2 минут
- [ ] Корректное движение по канбан доске
- [ ] Автоматический расчет стоимости по времени аренды
- [ ] Применение скидок за длительность аренды

**AC-003: Календарь автопарка**
- [ ] Отображение занятости всех автомобилей
- [ ] Фильтрация по параметрам
- [ ] Интерактивность элементов

**AC-004: Клиентский портал**
- [ ] Доступ клиентов к личному кабинету
- [ ] Просмотр активных и прошлых аренд
- [ ] Импорт и локальное хранение документов клиентов из Kommo
- [ ] Локальное хранение документов автомобилей (страховки, мулькия)
- [ ] Динамическое извлечение финансовых документов из Zoho через API
- [ ] Локальное хранение фото инспекций в SkyLuxse

**AC-005: Интеграция с Kommo CRM**
- [ ] Получение webhook событий от Kommo
- [ ] Автоматическое создание клиентов из лидов
- [ ] Автоматическое создание заказов при статусе Pre-confirm
- [ ] Синхронизация статусов между системами

**AC-006: Интеграция с Zoho**
- [ ] Автоматическое создание Sale Order в Zoho
- [ ] Синхронизация данных заказов между системами
- [ ] Обновление статусов заказов в Zoho
- [ ] Синхронизация финансовых данных

**AC-007: Обработка документов клиентов**
- [ ] Image recognition для извлечения данных документов
- [ ] Поддержка паспортов и водительских удостоверений
- [ ] Валидация извлеченных данных
- [ ] Сопоставление с данными из Kommo

**AC-008: Система штрафов**
- [ ] Автоматическая проверка штрафов при возврате
- [ ] Создание дополнительных платежей за штрафы
- [ ] Обновление инвойсов с штрафами
- [ ] Уведомления клиентов о штрафах

**AC-009: Действия водителя в задачах**
- [ ] Заполнение километража и уровня бензина
- [ ] Внесение принятых сумм денег
- [ ] Добавление предустановленных услуг с суммами
- [ ] Валидация данных перед завершением задач

### Нефункциональные критерии
**AC-010: Безопасность**
- [ ] Penetration testing пройден
- [ ] Шифрование конфиденциальных данных
- [ ] Аудит действий пользователей
